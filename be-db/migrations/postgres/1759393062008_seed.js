/**
 * @type {import('node-pg-migrate').ColumnDefinitions | undefined}
 */
exports.shorthands = undefined;

/**
 * @param pgm {import('node-pg-migrate').MigrationBuilder}
 * @param run {() => void | undefined}
 * @returns {Promise<void> | void}
 */
exports.up = async (pgm) => {
  // Добавляем идеи для развития платформы LogicLike
  await pgm.sql(`
    INSERT INTO app.ideas (name, count) VALUES
      ('Добавить раздел с математическими головоломками для продвинутых учеников', 142),
      ('Создать мобильное приложение для офлайн-режима', 256),
      ('Внедрить систему достижений и наград за прохождение курсов', 189),
      ('Добавить соревновательный режим между учениками', 201),
      ('Разработать раздел для родителей с аналитикой прогресса детей', 167),
      ('Добавить голосовые подсказки для младших школьников', 93),
      ('Создать интерактивные истории с логическими загадками', 178),
      ('Внедрить AI-ассистента для персонализированных рекомендаций', 224),
      ('Добавить раздел с шахматными задачами и обучением', 134),
      ('Создать систему командных челленджей для классов', 156),
      ('Разработать конструктор логических задач для учителей', 88),
      ('Добавить интеграцию с популярными LMS системами', 102),
      ('Создать раздел с задачами на пространственное мышление и 3D-геометрию', 145),
      ('Внедрить игровой сюжет с персонажами и прогрессией по миру', 312),
      ('Добавить раздел по программированию и алгоритмическому мышлению', 267),
      ('Создать систему еженедельных турниров с призами', 198),
      ('Добавить возможность создавать семейные аккаунты', 124),
      ('Разработать адаптивную сложность заданий на основе прогресса', 183),
      ('Внедрить социальные функции: друзья, чаты, совместное решение задач', 156),
      ('Добавить раздел с логическими играми на время', 172)
  `);

  // Добавляем записи о голосах с разных IP
  await pgm.sql(`
    INSERT INTO app.ip_voices (ip, ideas_ids) VALUES
      ('192.168.1.100', '[2, 14, 15, 8, 16]'),
      ('192.168.1.101', '[14, 2, 7, 1]'),
      ('10.0.0.50', '[15, 8, 14, 18, 4]'),
      ('172.16.0.25', '[14, 16, 3, 9]'),
      ('192.168.0.15', '[2, 8, 15, 5, 7]'),
      ('10.20.30.40', '[14, 1, 13, 20]'),
      ('172.31.255.1', '[15, 2, 8, 14, 10]'),
      ('192.168.100.50', '[14, 4, 16, 6]'),
      ('10.10.10.10', '[8, 15, 3, 14, 19]'),
      ('172.16.254.100', '[14, 2, 18, 5]')
  `);
};

/**
 * @param pgm {import('node-pg-migrate').MigrationBuilder}
 * @param run {() => void | undefined}
 * @returns {Promise<void> | void}
 */
exports.down = async (pgm) => {
  // Удаляем тестовые данные
  await pgm.sql('DELETE FROM app.ip_voices');
  await pgm.sql('DELETE FROM app.ideas');
};
